<!DOCTYPE html>
<html lang="en">
  <head>
    <title>mcramm.com</title>
    <meta charset="utf-8"/>
    <meta name="title" content="http://mcramm.com/">
    <link rel="canonical" href="http://mcramm.com/">
    <meta property="og:title" content="mcrammm.com"/>
    <meta property="og:url" content="http://mcramm.com/"/>
    <meta property="og:site_name" content="mcrammm.com">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>

    <link rel="stylesheet" href="/assets/css/normalize.css?version=2023-04-04T01:22:39+00:00" />
    <link rel="stylesheet" href="/assets/css/styles.css?version=2023-04-04T01:22:39+00:00" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CXZL3L7461"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CXZL3L7461');
    </script>
  </head>
  <body>
    <div class="nav">
      <a href="/">mcramm.com</a>
      <a href="https://twitter.com/cramm" target="_blank" rel="noopener">twitter</a>
      <a href="mailto:mike@mcramm.com" target="_blank" rel="noopener">email</a>
      <a href="https://github.com/mcramm" target="_blank" rel="noopener">github</a>
      <a href="/atom.xml" target="_blank" rel="noopener">rss</a>
    </div>
    <div class="wrapper">
      <h1>Breakout Clone 6: Music</h1>
<p>In my last post I added sound effects for the ball hitting the sides of play area, the blocks and the paddle.</p><p>Today I'm going to add some music. This won't take too long since most of the code is already in place.</p><p>First I'll add another <code>AudioSource</code> to the <code>SoundManager</code> and add a couple of methods to start & stop the music:</p><pre><code class="cs">public class SoundManager : MonoBehaviour
{
  public AudioSource sfxSource;
  public AudioSource musicSource;
  public static SoundManager instance = null;

  &#91;SerializeField&#93; float lowPitchRange = 0.95f;
  &#91;SerializeField&#93; float highPitchRange = 1.05f;

  // I've omitted the Awake&#40;&#41; and PlayRandomSFX&#40;&#41;
  // methods since they have not changed
  
  public void PlayMusic&#40;&#41; {
    musicSource.Play&#40;&#41;;
  }

  public void StopMusic&#40;&#41; {
    musicSource.Stop&#40;&#41;;
  }
</code></pre><p>These <code>AudioSource</code>s are components on my <code>GameSession</code> object that I've associated with the script by dragging-and-dropping them from the component, to the appropriate field in the UI. The sound effects didn't have an explicit <code>AudioClip</code> assigned since we were picking a random one in <code>PlayRandomSFX</code>. The music though <i>will</i> have an clip assigned to it, and I chose <a href='https://opengameart.org/content/battle-music'>this one</a>.</p><p>In my <code>GameSession</code> script, we'll start playing the music when the game begins;<pre><code class="cs">public class GameSession : MonoBehaviour
{
  // Awake and LoadNextLevel have not changed
  void Start&#40;&#41; {
    SoundManager.instance.PlayMusic&#40;&#41;;
  }
}
</code></pre></p><p>This won't be the behavior for long. In my next post, I'm going to add in some screens to handle the main menu, a victory screen when the player has completed all the levels, and a failure screen when ball hits the bottom of the play area.</p>
<div><em>Published: 2023-03-15</em></div>



    </div>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre code').forEach((el) => {
          hljs.highlightElement(el);
        });
      });
    </script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/main.js"></script>
  </body>
</html>
